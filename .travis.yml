matrix:
  include:
    - language: go
      os:
        - linux
        - osx
      go:
        - 1.9.x
        - 1.10.x
        - 1.11.x
      env:
        - DB_USER=root DB_PASSWD=''  DB_TNS='tcp(127.0.0.1:3306)'
      service:
        - mysql
        - rabbitmq
      before_install:
        - mysql -e 'CREATE DATABASE wayne;'
      script:
        - pwd
        - go get github.com/Qihoo360/wayne
        - cd /home/travis/gopath/src/github.com/Qihoo360/wayne && git submodule update --init --recursive
        - echo ''>  /home/travis/gopath/src/github.com/Qihoo360/wayne/src/backend/conf/dev.conf
        - cd src/backend && go run main.go -h
    - language: node_js
      os:
        - linux
        - osx
      node_js:
        - 8.9.4
      before_install:
        - git submodule update --init --recursive
        - cd src/frontend && npm install
      script:
        - npm run test
        - # npm run build
        - ls

    - language: go
      service:
        - docker
      script:
        - go get github.com/Qihoo360/wayne
        - cd /home/travis/gopath/src/github.com/Qihoo360/wayne && git submodule update --init --recursive
        - [if [ "$TRAVIS_BRANCH"  =~ "release/*" ]]; then make; fi




notifications:
  email:
    - 792400644@qq.com